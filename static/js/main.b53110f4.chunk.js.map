{"version":3,"sources":["assets/tux-batman.webp","assets/tux-spiderman.png","../../src/lib/clsx.ts","../../src/styles/index.tsx","../../src/lib/__consts.ts","../../src/global/CircumstanceProvider.tsx","../../src/lib/canUseDom.ts","../../src/lib/helpers.ts","../../src/core/eventManager.ts","../../src/hooks/useCircumstance.tsx","../../src/lib/makeId.ts","../../src/lib/mergeProps.ts","../../src/lib/mergeRefs.tsx","../../src/core/hoc/withType.tsx","../../src/core/elements/Menu.tsx","../../src/styles/ArrowIcon.tsx","../../src/core/elements/MenuItem.tsx","../../src/core/elements/Divider.tsx","../../src/core/elements/SubMenu.tsx","App.tsx","index.tsx"],"names":["module","exports","clsx","args","classNameIdentity","name","classNames","Menu","MenuItem","MenuItemInner","SubMenu","MenuIcon","ArrowIcon","Divider","CLASSNAMES","styles","CircumstanceProvider","CONSTS","HIDE_ALL","CIRCUMSTANCE_TYPES","defaultMenu","id","mousePosition","x","y","CircumstanceContext","pushStance","removeStance","currentMenu","useCircumstanceContext","React","children","useCallback","props","setCurrentMenu","value","className","canUseDOM","window","makeCoordinates","coordinates","removeEmptyFromObject","onlyUnique","index","self","hasOwnProperty","obj","prop","call","constructor","eventList","contextMenuEvent","event","closest","target","data","clickEvent","events","eventName","string","idAndEventFromString","hasButton","addEvents","passive","on","off","emit","elem","MouseEvent","this","useCircumstance","useRef","length","text","possible","i","Math","makeId","circleRef","callBackShow","e","pageY","callBackHide","useEffect","eventManager","ref","current","pushProp","key","oldFn","refs","Error","mergeProps","ps","merged","withType","WrappedComponent","__TYPE","rest","style","top","left","innerHeight","rect","innerWidth","getMenuPosition","tabIndex","node","parent","document","ReactDOM","portalToRoot","xmlns","enableBackground","version","viewBox","xmlSpace","d","subMenu","otherChildren","Children","child","separateChildrenFromMenu","useState","onMouseEnter","showSubMenu","onMouseLeave","role","Boolean","subMenuState","show","bottom","right","console","getSubMenuPosition","display","InnerApp","bindTrigger","bindMenu","icon","alt","src","require","onClick","persist","log","App","render","getElementById"],"mappings":"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","file":"static/js/main.b53110f4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/tux-batman.cd705941.webp\";","module.exports = __webpack_public_path__ + \"static/media/tux-spiderman.4ab6ee99.png\";","const clsx = (...args: (string | boolean | undefined)[]) => {\n  return args.filter(Boolean).join(' ')\n}\n\nexport default clsx\n","import styles from './styles.module.scss'\nimport clsx from '../lib/clsx'\n\nfunction classNameIdentity(name: string) {\n  return 'circumstance-' + name\n}\n\nexport const classNames = {\n  Menu: classNameIdentity('menu'),\n  MenuItem: classNameIdentity('menu-item'),\n  MenuItemInner: classNameIdentity('menu-item__inner'),\n  SubMenu: classNameIdentity('sub-menu'),\n  MenuIcon: classNameIdentity('menu-icon'),\n  ArrowIcon: classNameIdentity('arrow-icon'),\n  Divider: classNameIdentity('divider')\n}\n\nconst CLASSNAMES = {\n  Menu: clsx(styles.Menu, classNames.Menu),\n  MenuItem: clsx(styles.MenuItem, classNames.MenuItem),\n  MenuItemInner: clsx(styles.MenuItemInner, classNames.MenuItemInner),\n  SubMenu: clsx(styles.SubMenu, classNames.SubMenu),\n  MenuIcon: clsx(styles.MenuIcon, classNames.MenuIcon),\n  ArrowIcon: clsx(styles.ArrowIcon, classNames.ArrowIcon),\n  CircumstanceProvider: clsx(styles.CircumstanceProvider),\n  Divider: clsx(styles.Divider, classNames.Divider)\n}\n\nexport default CLASSNAMES\n","const CONSTS = {\n  PROVIDER_ID: 'react-circumstance-provider',\n  EVENTS: {\n    HIDE_ALL: 'HIDE_ALL'\n  },\n  RENDER_BUFFER: 0\n}\n\nexport enum CIRCUMSTANCE_TYPES {\n  CIRCUMSTANCE_MENU = 'CIRCUMSTANCE_MENU',\n  CIRCUMSTANCE_SUBMENU = 'CIRCUMSTANCE_SUBMENU',\n  CIRCUMSTANCE_MENUITEM = 'CIRCUMSTANCE_MENUITEM',\n  CIRCUMSTANCE_DIVIDER = 'CIRCUMSTANCE_DIVIDER',\n  CIRCUMSTANCE_DEFAULT = 'CIRCUMSTANCE_DEFAULT'\n}\n\nexport default CONSTS\n","import React, { useCallback } from 'react'\nimport CLASSNAMES from '../styles'\nimport CONSTS from '../lib/__consts'\n\nexport interface MousePosition {\n  x: number\n  y: number\n}\n\ninterface CurrentMenu {\n  id?: string\n  mousePosition: MousePosition\n}\n\nconst defaultMenu: CurrentMenu = {\n  id: undefined,\n  mousePosition: { x: 0, y: 0 }\n}\n\ninterface CircumstanceProps {\n  pushStance: (props: CurrentMenu) => void\n  removeStance: () => void\n  currentMenu: CurrentMenu\n}\n\nconst CircumstanceContext = React.createContext<CircumstanceProps>({\n  pushStance: () => {},\n  removeStance: () => {},\n  currentMenu: defaultMenu\n})\n\nexport const useCircumstanceContext = () =>\n  React.useContext(CircumstanceContext)\n\nconst CircumstanceProvider: React.FC<any> = ({ children }) => {\n  const [currentMenu, setCurrentMenu] = React.useState(defaultMenu)\n  const pushStance: CircumstanceProps['pushStance'] = useCallback(\n    (props) => {\n      setCurrentMenu(props)\n    },\n    [setCurrentMenu]\n  )\n  const removeStance: CircumstanceProps['removeStance'] = useCallback(() => {\n    setCurrentMenu(defaultMenu)\n  }, [setCurrentMenu])\n  return (\n    <CircumstanceContext.Provider\n      value={{ pushStance, removeStance, currentMenu }}\n    >\n      <div\n        id={CONSTS.PROVIDER_ID}\n        className={CLASSNAMES.CircumstanceProvider}\n      />\n      {children}\n    </CircumstanceContext.Provider>\n  )\n}\nexport default CircumstanceProvider\n","const canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n)\n\nexport default canUseDOM\n","import { CSSProperties, ReactNode, RefObject } from 'react'\nimport ReactDOM from 'react-dom'\nimport CONSTS from './__consts'\n\nexport function idAndEventFromString(string: string) {\n  let [id, event] = string.split('.')\n  if (!event) event = ''\n  return [id, event]\n}\n\nexport function portalToRoot(node: ReactNode, id: string) {\n  const parent = document.querySelector(`#${CONSTS.PROVIDER_ID}`) as Element\n  if (!parent) throw Error(`Please put <CircumstanceProvider /> at the top!`)\n  return ReactDOM.createPortal(node, parent, id)\n}\n\ninterface GetMenuPosition {\n  x: number\n  y: number\n  ref: RefObject<any>\n}\ninterface GetSubMenuPosition {\n  ref: RefObject<any>\n}\n\nconst removeEmptyFromObject = (y: { [key: string]: any }) => {\n  const x = {}\n  for (const key in y) {\n    if (y[key]) x[key] = y[key]\n  }\n  return x\n}\n\nconst makeCoordinates = (coordinates: {\n  left?: number | string | null | undefined\n  top?: number | string | null | undefined\n  bottom?: number | string | null | undefined\n  right?: number | string | null | undefined\n}) => {\n  const x = removeEmptyFromObject(coordinates)\n  for (const key in x) {\n    if (typeof x[key] === 'number') x[key] = `${x[key]}%`\n  }\n  return x\n}\n\nexport function getSubMenuPosition({ ref }: GetSubMenuPosition): CSSProperties {\n  const coordinates = {\n    left: 100 as number | string | null | undefined,\n    top: 0 as number | string | null | undefined,\n    bottom: 0 as number | string | null | undefined,\n    right: 0 as number | string | null | undefined\n  }\n  if (!ref.current) return makeCoordinates(coordinates)\n  const { innerWidth, innerHeight } = window\n  const rect = ref.current.getBoundingClientRect()\n  console.log(rect)\n  if (rect.top + rect.height > innerHeight) {\n    coordinates.bottom = '0%'\n  }\n  if (rect.left + rect.width > innerWidth) {\n    coordinates.left = null\n    coordinates.right = 100\n  }\n\n  return makeCoordinates(coordinates)\n}\n\nexport function getMenuPosition({\n  x = 0,\n  y = 0,\n  ref\n}: GetMenuPosition): CSSProperties {\n  const coordinates = {\n    top: y,\n    left: x\n  }\n  if (!ref.current) return coordinates\n  const { innerWidth, innerHeight } = window\n  const rect = ref.current.getBoundingClientRect()\n  if (y + rect.height > innerHeight) {\n    coordinates.top = coordinates.top - rect.height\n  }\n  if (x + rect.width > innerWidth) {\n    coordinates.left = coordinates.left - rect.width\n  }\n  if (coordinates.top < 0) {\n    coordinates.top =\n      rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0\n  }\n  if (coordinates.left < 0) {\n    coordinates.left =\n      rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0\n  }\n  return coordinates\n}\n\nexport function deepEqual(x: any, y: any) {\n  if (x === y) {\n    return true\n  } else if (\n    typeof x === 'object' &&\n    x != null &&\n    typeof y === 'object' &&\n    y != null\n  ) {\n    if (Object.keys(x).length !== Object.keys(y).length) return false\n\n    for (const prop in x) {\n      if (\n        prop &&\n        {}.hasOwnProperty.call(x, prop) &&\n        {}.hasOwnProperty.call(y, prop)\n      ) {\n        if (!deepEqual(x[prop], y[prop])) return false\n      } else {\n        return false\n      }\n    }\n\n    return true\n  } else return false\n}\n\nexport function onlyUnique(value: any, index: number, self: any[]) {\n  return self.indexOf(value) === index\n}\n\nexport function hasOwnProperty<X extends {}, Y extends PropertyKey>(\n  obj: X,\n  prop: Y\n): obj is X & Record<Y, unknown> {\n  return {}.hasOwnProperty.call(obj, prop)\n}\n\nexport function doNothingWith(something: any) {\n  return something\n}\n","import canUseDOM from '../lib/canUseDom'\n// import { idAndEventFromString } from '../lib/helpers'\nimport CONSTS from '../lib/__consts'\nimport { idAndEventFromString, onlyUnique } from '../lib/helpers'\n\nexport type EventType = string\nexport type Handler<T = any> = (args?: T) => void\n\nexport interface EventManagerProps<E = EventType> {\n  on<T = any>(event: E, handler: Handler<T>): EventManagerProps<E>\n  off<T = any>(event: E, handler?: Handler<T>): EventManagerProps<E>\n  emit(event: E, MouseEvent: MouseEvent): EventManagerProps<E>\n}\n\nclass EventManager implements EventManagerProps {\n  eventList = new Map()\n  contextMenuEvent = (event: MouseEvent) => {\n    const target = event.target as HTMLElement\n    const closest = target.closest(`[data-circumstance-id]`) as HTMLElement\n    if (closest) {\n      const data = closest.dataset || {}\n      if (data?.circumstanceId) {\n        return this.emit(`${data.circumstanceId}.show`, event)\n      }\n    }\n    return this.emit(CONSTS.EVENTS.HIDE_ALL, event)\n  }\n\n  clickEvent = (event: MouseEvent) => {\n    const target = event.target as HTMLElement\n    const events = [...this.eventList.keys()]\n      .map((eventName) => idAndEventFromString(eventName)[0])\n      .filter(onlyUnique)\n    const hasButton = target.closest(`[role=\"button\"]`)\n    const closest = events.map((id) => target.closest(`#${id}`)).filter(Boolean)\n    if (!closest || !closest.length || hasButton)\n      this.emit(CONSTS.EVENTS.HIDE_ALL, event)\n  }\n\n  constructor() {\n    this.addEvents()\n  }\n\n  addEvents = () => {\n    if (canUseDOM) {\n      window.addEventListener('contextmenu', this.contextMenuEvent, {\n        passive: false\n      })\n      window.addEventListener('click', this.clickEvent)\n    }\n    return () => {\n      if (canUseDOM) {\n        window.removeEventListener('contextmenu', this.contextMenuEvent)\n        window.removeEventListener('click', this.clickEvent)\n      }\n    }\n  }\n\n  on = (event: EventType, callBack: Handler) => {\n    if (!this.eventList.get(event)) {\n      this.eventList.set(event, callBack)\n    }\n    return this\n  }\n\n  off = (event: EventType) => {\n    if (this.eventList.get(event)) this.eventList.delete(event)\n    return this\n  }\n\n  emit = (event: EventType, MouseEvent: MouseEvent) => {\n    if (event === CONSTS.EVENTS.HIDE_ALL) {\n      this.eventList.forEach((elem, index) => {\n        if (index.includes('.hide')) elem(MouseEvent)\n      })\n      return this\n    }\n    if (event && this.eventList.get(event)) {\n      MouseEvent.preventDefault()\n      this.eventList.get(event)(MouseEvent)\n    }\n    return this\n  }\n}\n\nexport default new EventManager()\n","import { MouseEvent, useRef, useEffect, useCallback } from 'react'\nimport { useCircumstanceContext } from '../global/CircumstanceProvider'\nimport makeId from '../lib/makeId'\nimport eventManager from '../core/eventManager'\n\ntype BindTrigger = () => {\n  ref: (ref: any) => any\n  'data-circumstance-id': string\n}\ntype BindMenu = () => {\n  'data-circumstance-menu-id': string\n  id: string\n}\nfunction useCircumstance(): [BindTrigger, BindMenu] {\n  const { pushStance, removeStance } = useCircumstanceContext()\n  const id = useRef(makeId())\n  const circleRef = useRef(null)\n  const callBackShow = useCallback((e: MouseEvent) => {\n    e.preventDefault()\n    pushStance({\n      id: id.current,\n      mousePosition: { x: e.pageX, y: e.pageY }\n    })\n  }, [])\n  const callBackHide = useCallback(() => {\n    removeStance()\n  }, [])\n  useEffect(() => {\n    eventManager.on(`${id.current}.show`, callBackShow)\n    eventManager.on(`${id.current}.hide`, callBackHide)\n    return () => {\n      eventManager.off(`${id.current}.show`)\n      eventManager.off(`${id.current}.hide`)\n    }\n  })\n  return [\n    function () {\n      return {\n        ref: (ref: any) => (circleRef.current = ref),\n        'data-circumstance-id': id.current\n      }\n    },\n    function () {\n      return {\n        'data-circumstance-menu-id': id.current,\n        id: id.current\n      }\n    }\n  ]\n}\n\nexport default useCircumstance\n","const makeId: (length?: number) => string = (length = 5) => {\n  let text = ''\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'\n\n  for (let i = 0; i < length; i++) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length))\n  }\n\n  return text\n}\n\nexport default makeId\n","/*\n * @link https://github.com/zhangkaiyulw/react-merge-props\n */\n\nimport mergeRefs from './mergeRefs'\nimport { hasOwnProperty } from './helpers'\n\ntype UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends (\n  k: infer I\n) => void\n  ? I\n  : never\n\nfunction pushProp(\n  target: { [key: string]: any },\n  key: string,\n  value: any\n): void {\n  if (key === 'className') {\n    target.className = [target.className, value].join(' ').trim()\n  } else if (key === 'style') {\n    target.style = { ...target.style, ...value }\n  } else if (typeof value === 'function') {\n    const oldFn = target[key] as Function | undefined\n    target[key] = oldFn\n      ? (...args: any[]) => {\n          oldFn(...args)\n          ;(value as Function)(...args)\n        }\n      : value\n  } else if (\n    // skip merging undefined values\n    value === undefined ||\n    // skip if both value are the same primitive value\n    (typeof value !== 'object' && value === target[key])\n  ) {\n  } else if (key === 'ref') {\n    target[key] = mergeRefs([target[key], value])\n  } else if (!(key in target)) {\n    target[key] = value\n  } else {\n    throw new Error(\n      `Didn't know how to merge prop '${key}'. ` +\n        `Only 'className', 'style', and event handlers are supported`\n    )\n  }\n}\n\n/**\n * Merges sets of props together:\n *  - duplicate `className` props get concatenated\n *  - duplicate `style` props get shallow merged (later props have precedence for conflicting rules)\n *  - duplicate functions (to be used for event handlers) get called in order from left to right\n * @param props Sets of props to merge together. Later props have precedence.\n */\nexport default function mergeProps<T extends {}[]>(\n  ...props: T\n): {\n  [K in keyof UnionToIntersection<T[number]>]: K extends 'className'\n    ? string\n    : K extends 'style'\n    ? UnionToIntersection<T[number]>[K]\n    : Exclude<Extract<T[number], { [Q in K]: unknown }>[K], undefined>\n} {\n  if (props.length === 1) {\n    return props[0] as any\n  }\n\n  return props.reduce((merged, ps: any) => {\n    for (const key in ps) {\n      if (key && hasOwnProperty(ps, key)) pushProp(merged, key, ps[key])\n    }\n    return merged\n  }, {}) as any\n}\n","import React from 'react'\n\n/*\n * From @gregberge on GitHub\n * @link https://github.com/gregberge/react-merge-refs\n */\nexport default function mergeRefs<T = any>(\n  refs: Array<React.MutableRefObject<T> | React.LegacyRef<T>>\n): React.RefCallback<T> {\n  return (value) => {\n    refs.forEach((ref) => {\n      if (typeof ref === 'function') {\n        ref(value)\n      } else if (ref != null) {\n        ;(ref as React.MutableRefObject<T | null>).current = value\n      }\n    })\n  }\n}\n","import React from 'react'\nimport { CIRCUMSTANCE_TYPES } from '../../lib/__consts'\n// import { Subtract } from 'utility-types'\n\nexport interface WithType {\n  __TYPE?: CIRCUMSTANCE_TYPES\n}\n//\n// const withType = <P, CIRCUMSTANCE_TYPES>(\n//   WrappedComponent: ComponentType<P>,\n//   type: CIRCUMSTANCE_TYPES = CIRCUMSTANCE_TYPES.CIRCUMSTANCE_DEFAULT\n// ) => {\n//   return class extends Component<P & any, any> {\n//     render() {\n//       return <WrappedComponent {...{ ...(this.props as P), __TYPE: type }} />\n//     }\n//   }\n// }\n\nconst withType = <P extends WithType>(\n  WrappedComponent: React.ComponentType<P>,\n  __TYPE: CIRCUMSTANCE_TYPES\n) => {\n  WrappedComponent.defaultProps = {\n    __TYPE: __TYPE as any\n  }\n  return WrappedComponent\n}\n\nexport default withType\n","import React, { useRef } from 'react'\nimport { getMenuPosition, portalToRoot } from '../../lib/helpers'\n// import withRenderBuffer from '../hoc/withRenderBuffer'\nimport { useCircumstanceContext } from '../../global/CircumstanceProvider'\n// import { useDeepCompareEffect } from '../../hooks/useDeepCompare'\nimport CLASSNAMES from '../../styles'\nimport mergeProps from '../../lib/mergeProps'\nimport { CIRCUMSTANCE_TYPES } from '../../lib/__consts'\nimport withType, { WithType } from '../hoc/withType'\n\n// import useRefState from '../../hooks/useRefState'\n\ninterface MenuProps\n  extends React.DetailedHTMLProps<\n      React.HTMLAttributes<HTMLElement>,\n      HTMLElement\n    >,\n    WithType {\n  id: string\n}\n\nconst Menu: React.FC<MenuProps> = ({ __TYPE, id, children, ...rest }) => {\n  const { currentMenu } = useCircumstanceContext()\n  // const [coordinates, setCoordinates] = useRefState<CSSProperties>({})\n  const ref = useRef<HTMLDivElement | null>(null)\n  const style = getMenuPosition({\n    ...currentMenu.mousePosition,\n    ref\n  })\n  const props = {\n    'aria-label': 'menu',\n    tabIndex: -1,\n    className: CLASSNAMES.Menu,\n    style,\n    ref: ref,\n    id: id\n  }\n  if (currentMenu.id !== id) {\n    return null\n  }\n  return portalToRoot(<nav {...mergeProps(props, rest)}>{children}</nav>, id)\n}\n\nif (process.env.NODE_ENV !== 'production') (Menu as any).whyDidYouRender = false\n\nexport default withType(Menu, CIRCUMSTANCE_TYPES.CIRCUMSTANCE_MENU)\n","import React from 'react'\n\nfunction ArrowIcon(props: React.SVGProps<any>) {\n  return (\n    <svg\n      xmlns='http://www.w3.org/2000/svg'\n      x='0'\n      y='0'\n      enableBackground='new 0 0 492.004 492.004'\n      version='1.1'\n      viewBox='0 0 492.004 492.004'\n      xmlSpace='preserve'\n      {...props}\n    >\n      <path d='M382.678 226.804L163.73 7.86C158.666 2.792 151.906 0 144.698 0s-13.968 2.792-19.032 7.86l-16.124 16.12c-10.492 10.504-10.492 27.576 0 38.064L293.398 245.9l-184.06 184.06c-5.064 5.068-7.86 11.824-7.86 19.028 0 7.212 2.796 13.968 7.86 19.04l16.124 16.116c5.068 5.068 11.824 7.86 19.032 7.86s13.968-2.792 19.032-7.86L382.678 265c5.076-5.084 7.864-11.872 7.848-19.088.016-7.244-2.772-14.028-7.848-19.108z' />\n    </svg>\n  )\n}\n\nexport default React.memo(ArrowIcon)\n","import React, { Children, useCallback, useState } from 'react'\nimport CLASSNAMES from '../../styles'\nimport mergeProps from '../../lib/mergeProps'\nimport { CIRCUMSTANCE_TYPES } from '../../lib/__consts'\n// import { hasOwnProperty } from '../../lib/helpers'\nimport withType, { WithType } from '../hoc/withType'\nimport { hasOwnProperty } from '../../lib/helpers'\nimport ArrowIcon from '../../styles/ArrowIcon'\n\ntype ButtonProps = React.DetailedHTMLProps<\n  React.HTMLAttributes<Element>,\n  Element\n>\ninterface MenuItemProps extends ButtonProps, WithType {\n  icon?: React.ReactNode\n}\n\nfunction separateChildrenFromMenu(children: React.ReactNode) {\n  const subMenu: React.ReactNodeArray = []\n  const otherChildren: React.ReactNodeArray = []\n  Children.toArray(children).forEach((child) => {\n    if (\n      hasOwnProperty(child, 'props') &&\n      child.props.__TYPE === CIRCUMSTANCE_TYPES.CIRCUMSTANCE_SUBMENU\n    ) {\n      return subMenu.push(child)\n    }\n\n    return otherChildren.push(child)\n  })\n  return { otherChildren, subMenu }\n}\n\nconst MenuItem: React.FC<MenuItemProps> = ({\n  __TYPE,\n  children,\n  icon,\n  ...rest\n}) => {\n  const { otherChildren, subMenu } = separateChildrenFromMenu(children)\n  const [subMenuState, showSubMenu] = useState<boolean>(false)\n  const onMouseEnter = useCallback((e: React.MouseEvent) => {\n    e.preventDefault()\n    showSubMenu(true)\n  }, [])\n  const onMouseLeave = useCallback((e: React.MouseEvent) => {\n    e.preventDefault()\n    showSubMenu(false)\n  }, [])\n  const props: ButtonProps = {\n    className: CLASSNAMES.MenuItem,\n    ...(typeof rest.onClick === 'function' ? { role: 'button' } : {}),\n    ...(subMenu.length ? { onMouseEnter, onMouseLeave } : {})\n  }\n  return (\n    <div {...mergeProps(props, rest)}>\n      <div className={CLASSNAMES.MenuIcon}>{icon}</div>\n      <div className={CLASSNAMES.MenuItemInner}>{otherChildren}</div>\n      <div className={CLASSNAMES.MenuIcon}>\n        {Boolean(subMenu.length) && (\n          <ArrowIcon className={CLASSNAMES.ArrowIcon} />\n        )}\n      </div>\n      {subMenuState &&\n        React.cloneElement(subMenu[0] as React.ReactElement, {\n          show: subMenuState\n        })}\n    </div>\n  )\n}\n\n// if (process.env.NODE_ENV !== 'production')\n//   (MenuItem as any).whyDidYouRender = true\n\nexport default withType(MenuItem, CIRCUMSTANCE_TYPES.CIRCUMSTANCE_MENUITEM)\n","import React, { HTMLProps } from 'react'\nimport CLASSNAMES from '../../styles'\nimport mergeProps from '../../lib/mergeProps'\nimport withType, { WithType } from '../hoc/withType'\nimport { CIRCUMSTANCE_TYPES } from '../../lib/__consts'\n\ninterface Props extends HTMLProps<HTMLDivElement>, WithType {}\n\nfunction Divider({ __TYPE, ...rest }: Props) {\n  return <div {...mergeProps(rest, { className: CLASSNAMES.Divider })} />\n}\nexport default withType(Divider, CIRCUMSTANCE_TYPES.CIRCUMSTANCE_DIVIDER)\n","import React, { useRef } from 'react'\nimport withType, { WithType } from '../hoc/withType'\n// import { CIRCUMSTANCE_TYPES } from '../../lib/__consts'\nimport mergeProps from '../../lib/mergeProps'\nimport { CIRCUMSTANCE_TYPES } from '../../lib/__consts'\nimport CLASSNAMES from '../../styles'\nimport { getSubMenuPosition } from '../../lib/helpers'\n\ninterface SubMenuProps\n  extends React.DetailedHTMLProps<React.HTMLAttributes<Element>, Element>,\n    WithType {\n  show?: boolean\n}\n\nconst SubMenu: React.FC<SubMenuProps> = ({\n  __TYPE,\n  show,\n  children,\n  ...rest\n}) => {\n  const ref = useRef<HTMLElement | null>(null)\n  const style = {\n    ...getSubMenuPosition({ ref }),\n    ...(show ? {} : { display: 'none' })\n  }\n  console.log(ref.current)\n  const props = {\n    className: CLASSNAMES.SubMenu,\n    style\n  }\n  delete rest.ref\n  return (\n    <div {...mergeProps(rest, props)} ref={(e) => (ref.current = e)}>\n      {children}\n    </div>\n  )\n}\n\nexport default withType(SubMenu, CIRCUMSTANCE_TYPES.CIRCUMSTANCE_SUBMENU)\n","import React from 'react'\n\nimport {\n  CircumstanceProvider,\n  useCircumstance,\n  Menu,\n  MenuItem,\n  Divider,\n  SubMenu\n} from 'react-circumstance'\nimport 'react-circumstance/dist/index.css'\n\nconst InnerApp = () => {\n  const [bindTrigger, bindMenu] = useCircumstance()\n  return (\n    <>\n      <div {...bindTrigger()} className='clickable'>\n        <div>Right Click Me</div>\n      </div>\n      <Menu {...bindMenu()}>\n        <MenuItem\n          icon={\n            <img\n              alt={'i am also an icon'}\n              src={require('./assets/tux-batman.webp')}\n            />\n          }\n          onClick={(e) => {\n            e.persist()\n            console.log(e)\n          }}\n        >\n          Item 1\n          <SubMenu>\n            <MenuItem>SubMenu 1 Item 1</MenuItem>\n            <MenuItem>SubMenu 1 Item 1</MenuItem>\n            <MenuItem>SubMenu 1 Item 1</MenuItem>\n            <MenuItem>SubMenu 1 Item 1</MenuItem>\n            <MenuItem>SubMenu 1 Item 1</MenuItem>\n          </SubMenu>\n        </MenuItem>\n        <MenuItem\n          icon={\n            <img\n              alt={'i am an icon'}\n              src={require('./assets/tux-spiderman.png')}\n            />\n          }\n        >\n          Item 2\n        </MenuItem>\n        <MenuItem>Item 3</MenuItem>\n        <Divider />\n        <MenuItem>Item 4</MenuItem>\n        <MenuItem>Item 5</MenuItem>\n        <MenuItem>Item 6</MenuItem>\n      </Menu>\n    </>\n  )\n}\nconst App = () => {\n  return (\n    <CircumstanceProvider>\n      <div className={'wrapper'}>\n        <InnerApp />\n      </div>\n    </CircumstanceProvider>\n  )\n}\n\nexport default App\n","import './index.scss'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nif (process.env.NODE_ENV !== 'production') {\n  const whyDidYouRender = require('@welldone-software/why-did-you-render')\n  whyDidYouRender(React, {\n    trackAllPureComponents: true,\n    trackHooks: true\n  })\n}\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}